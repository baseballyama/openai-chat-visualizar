import{s as ee,n as w,r as x}from"../chunks/scheduler.KqCp1VWV.js";import{S as te,i as le,e as j,s as L,t as M,n as J,c as y,l as z,f as U,a as R,b as X,d as p,m as v,g as E,o as D,h as m,p as H,j as F,q as se}from"../chunks/index.Z3YDkVAm.js";import{e as G}from"../chunks/each.A6GNbPRI.js";function Q(l,e,a){const s=l.slice();return s[15]=e[a],s[16]=e,s[17]=a,s}function W(l){let e,a;return{c(){e=j("textarea"),this.h()},l(s){e=y(s,"TEXTAREA",{class:!0}),R(e).forEach(p),this.h()},h(){v(e,"class","vector svelte-1ruqg1j"),e.value=a=`[${l[15].aVector.length>0&&l[15].aVector.join(", ")}]<`,e.readOnly=!0},m(s,r){E(s,e,r)},p(s,r){r&16&&a!==(a=`[${s[15].aVector.length>0&&s[15].aVector.join(", ")}]<`)&&(e.value=a)},d(s){s&&p(e)}}}function Y(l){let e,a;return{c(){e=j("textarea"),this.h()},l(s){e=y(s,"TEXTAREA",{class:!0}),R(e).forEach(p),this.h()},h(){v(e,"class","vector svelte-1ruqg1j"),e.value=a=`[${l[15].bVector.length>0&&l[15].bVector.join(", ")}]<`,e.readOnly=!0},m(s,r){E(s,e,r)},p(s,r){r&16&&a!==(a=`[${s[15].bVector.length>0&&s[15].bVector.join(", ")}]<`)&&(e.value=a)},d(s){s&&p(e)}}}function Z(l){let e,a,s,r,q,c,u,b,T,N,V=(l[15].similarity===0?"(Not Embedded)":l[15].similarity.toFixed(6))+"",I,A,k,C,K="Delete",P,h;function g(){l[9].call(s,l[16],l[17])}let o=l[15].aVector.length>0&&W(l);function O(){l[10].call(u,l[16],l[17])}let d=l[15].bVector.length>0&&Y(l);function S(){return l[11](l[17])}return{c(){e=j("ul"),a=j("li"),s=j("textarea"),r=L(),o&&o.c(),q=L(),c=j("li"),u=j("textarea"),b=L(),d&&d.c(),T=L(),N=j("li"),I=M(V),A=L(),k=j("li"),C=j("button"),C.textContent=K,this.h()},l(n){e=y(n,"UL",{class:!0});var i=R(e);a=y(i,"LI",{class:!0});var t=R(a);s=y(t,"TEXTAREA",{placeholder:!0,class:!0}),R(s).forEach(p),r=U(t),o&&o.l(t),t.forEach(p),q=U(i),c=y(i,"LI",{class:!0});var f=R(c);u=y(f,"TEXTAREA",{placeholder:!0,class:!0}),R(u).forEach(p),b=U(f),d&&d.l(f),f.forEach(p),T=U(i),N=y(i,"LI",{class:!0});var _=R(N);I=X(_,V),_.forEach(p),A=U(i),k=y(i,"LI",{class:!0});var B=R(k);C=y(B,"BUTTON",{class:!0,"data-svelte-h":!0}),z(C)!=="svelte-h73lb"&&(C.textContent=K),B.forEach(p),i.forEach(p),this.h()},h(){v(s,"placeholder","Input your sentence"),v(s,"class","svelte-1ruqg1j"),v(a,"class","svelte-1ruqg1j"),v(u,"placeholder","Input your sentence"),v(u,"class","svelte-1ruqg1j"),v(c,"class","svelte-1ruqg1j"),v(N,"class","svelte-1ruqg1j"),v(C,"class","svelte-1ruqg1j"),v(k,"class","svelte-1ruqg1j"),v(e,"class","svelte-1ruqg1j")},m(n,i){E(n,e,i),m(e,a),m(a,s),D(s,l[15].a),m(a,r),o&&o.m(a,null),m(e,q),m(e,c),m(c,u),D(u,l[15].b),m(c,b),d&&d.m(c,null),m(e,T),m(e,N),m(N,I),m(e,A),m(e,k),m(k,C),P||(h=[H(s,"input",g),H(u,"input",O),H(C,"click",S)],P=!0)},p(n,i){l=n,i&16&&D(s,l[15].a),l[15].aVector.length>0?o?o.p(l,i):(o=W(l),o.c(),o.m(a,null)):o&&(o.d(1),o=null),i&16&&D(u,l[15].b),l[15].bVector.length>0?d?d.p(l,i):(d=Y(l),d.c(),d.m(c,null)):d&&(d.d(1),d=null),i&16&&V!==(V=(l[15].similarity===0?"(Not Embedded)":l[15].similarity.toFixed(6))+"")&&F(I,V)},d(n){n&&p(e),o&&o.d(),d&&d.d(),P=!1,x(h)}}}function $(l){let e,a,s,r,q;return{c(){e=j("p"),a=M(l[3]),s=M("/"),r=M(l[2]),q=M(" tasks completed"),this.h()},l(c){e=y(c,"P",{class:!0});var u=R(e);a=X(u,l[3]),s=X(u,"/"),r=X(u,l[2]),q=X(u," tasks completed"),u.forEach(p),this.h()},h(){v(e,"class","progress svelte-1ruqg1j")},m(c,u){E(c,e,u),m(e,a),m(e,s),m(e,r),m(e,q)},p(c,u){u&8&&F(a,c[3]),u&4&&F(r,c[2])},d(c){c&&p(e)}}}function ae(l){let e,a="OpenAI API key",s,r,q,c,u,b,T,N='<li class="svelte-1ruqg1j">Sentence1</li> <li class="svelte-1ruqg1j">Sentence2</li> <li class="svelte-1ruqg1j">Cosine Similarity</li> <li class="svelte-1ruqg1j">Delete</li>',V,I,A,k,C="+ Add",K,P,h="Embeddings",g,o,O,d,S=G(l[4]),n=[];for(let t=0;t<S.length;t+=1)n[t]=Z(Q(l,S,t));let i=l[2]>0&&$(l);return{c(){e=j("p"),e.textContent=a,s=L(),r=j("input"),q=L(),c=j("p"),u=M(l[1]),b=L(),T=j("ul"),T.innerHTML=N,V=L();for(let t=0;t<n.length;t+=1)n[t].c();I=L(),A=j("div"),k=j("button"),k.textContent=C,K=L(),P=j("button"),P.textContent=h,g=L(),i&&i.c(),o=J(),this.h()},l(t){e=y(t,"P",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1bemo3x"&&(e.textContent=a),s=U(t),r=y(t,"INPUT",{placeholder:!0,class:!0}),q=U(t),c=y(t,"P",{class:!0});var f=R(c);u=X(f,l[1]),f.forEach(p),b=U(t),T=y(t,"UL",{class:!0,"data-svelte-h":!0}),z(T)!=="svelte-xcuk7k"&&(T.innerHTML=N),V=U(t);for(let B=0;B<n.length;B+=1)n[B].l(t);I=U(t),A=y(t,"DIV",{class:!0});var _=R(A);k=y(_,"BUTTON",{class:!0,"data-svelte-h":!0}),z(k)!=="svelte-bmdsrz"&&(k.textContent=C),K=U(_),P=y(_,"BUTTON",{class:!0,"data-svelte-h":!0}),z(P)!=="svelte-s3q32i"&&(P.textContent=h),_.forEach(p),g=U(t),i&&i.l(t),o=J(),this.h()},h(){v(e,"class","openai-api-key svelte-1ruqg1j"),v(r,"placeholder","OpenAI API key"),v(r,"class","api-input svelte-1ruqg1j"),v(c,"class","input-error svelte-1ruqg1j"),v(T,"class","svelte-1ruqg1j"),v(k,"class","svelte-1ruqg1j"),v(P,"class","execute-button svelte-1ruqg1j"),v(A,"class","buttons svelte-1ruqg1j")},m(t,f){E(t,e,f),E(t,s,f),E(t,r,f),D(r,l[0]),E(t,q,f),E(t,c,f),m(c,u),E(t,b,f),E(t,T,f),E(t,V,f);for(let _=0;_<n.length;_+=1)n[_]&&n[_].m(t,f);E(t,I,f),E(t,A,f),m(A,k),m(A,K),m(A,P),E(t,g,f),i&&i.m(t,f),E(t,o,f),O||(d=[H(r,"input",l[8]),H(k,"click",l[5]),H(P,"click",l[7])],O=!0)},p(t,[f]){if(f&1&&r.value!==t[0]&&D(r,t[0]),f&2&&F(u,t[1]),f&80){S=G(t[4]);let _;for(_=0;_<S.length;_+=1){const B=Q(t,S,_);n[_]?n[_].p(B,f):(n[_]=Z(B),n[_].c(),n[_].m(I.parentNode,I))}for(;_<n.length;_+=1)n[_].d(1);n.length=S.length}t[2]>0?i?i.p(t,f):(i=$(t),i.c(),i.m(o.parentNode,o)):i&&(i.d(1),i=null)},i:w,o:w,d(t){t&&(p(e),p(s),p(r),p(q),p(c),p(b),p(T),p(V),p(I),p(A),p(g),p(o)),se(n,t),i&&i.d(t),O=!1,x(d)}}}function ie(l,e,a){let s="";s=sessionStorage.getItem("openaiApiKey")||"";let r="";const q={};let c=0,u=0,b=[{a:"",aVector:[],b:"",bVector:[],similarity:0}];const T=()=>{a(4,b=[...b,{a:"",aVector:[],b:"",bVector:[],similarity:0}])},N=h=>{a(4,b=b.filter((g,o)=>o!==h))},V=async h=>{if(q[h])return q[h];const O=(await(await fetch("https://api.openai.com/v1/embeddings",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({input:h,model:"text-embedding-3-small"})})).json()).data[0].embedding;return q[h]=O,O},I=(h,g)=>{const o=(d,S)=>{let n=0;for(let i=0;i<d.length;i++)n+=d[i]*S[i];return n},O=d=>{let S=0;for(let n=0;n<d.length;n++)S+=d[n]*d[n];return Math.sqrt(S)};return o(h,g)/(O(h)*O(g))},A=async()=>{if(a(2,c=b.length),a(3,u=0),a(1,r=""),s===""){a(1,r="Please input your OpenAI API key");return}sessionStorage.setItem("openaiApiKey",s),b.flatMap(async h=>{const[g,o]=await Promise.all([V(h.a),V(h.b)]);a(3,u+=1);const O=I(g,o);h.aVector=g,h.bVector=o,h.similarity=O,a(4,b=[...b])})};function k(){s=this.value,a(0,s)}function C(h,g){h[g].a=this.value,a(4,b)}function K(h,g){h[g].b=this.value,a(4,b)}return[s,r,c,u,b,T,N,A,k,C,K,h=>N(h)]}class ue extends te{constructor(e){super(),le(this,e,ie,ae,ee,{})}}export{ue as component};
