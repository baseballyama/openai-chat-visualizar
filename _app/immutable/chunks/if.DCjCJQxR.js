import{w as S,z as D,S as r,A as O,B as k,C as A,l as m,i as N,s as l,D as b,m as g,F as y,U as d,G as x,u as I,J as M,K as j,b as F,H as K,r as L,d as R,e as w,f as E,M as B}from"./runtime.tknKwpXK.js";import{h as Y,d as T,i as z}from"./disclose-version.ClZd1kWz.js";function _(e,n=!0,f=null,s){if(typeof e=="object"&&e!=null){let t=e;if((S(t)||D in t)&&(t=C(t)),r in t){const i=t[r];if(i.t===t||i.p===t)return i.p}const o=M(t);if(o===O||o===k){const i=new Proxy(t,H);return A(t,r,{value:{s:new Map,v:m(0),a:N(t),i:n,p:i,t},writable:!0,enumerable:!1}),i}}return e}function h(e,n){if(typeof e=="object"&&e!=null&&r in e){const f=n.get(e);if(f!==void 0)return f;if(N(e)){const s=[];n.set(e,s);for(const t of e)s.push(h(t,n));return s}else{const s={},t=Reflect.ownKeys(e),o=j(e);n.set(e,s);for(const i of t)if(i!==r)if(o[i].get)A(s,i,o[i]);else{const c=e[i];s[i]=h(c,n)}return s}}return e}function C(e){return h(e,new Map)}function v(e,n=1){l(e,e.v+n)}const H={defineProperty(e,n,f){if(f.value){const s=e[r],t=s.s.get(n);t!==void 0&&l(t,_(f.value,s.i,s))}return Reflect.defineProperty(e,n,f)},deleteProperty(e,n){const f=e[r],s=f.s.get(n),t=f.a,o=delete e[n];if(t&&o){const i=f.s.get("length"),c=e.length-1;i!==void 0&&i.v!==c&&l(i,c)}return s!==void 0&&l(s,d),o&&v(f.v),o},get(e,n,f){var o;if(n===r)return Reflect.get(e,r);const s=e[r];let t=s.s.get(n);if(t===void 0&&(!(n in e)||(o=b(e,n))!=null&&o.writable)&&(t=(s.i?m:g)(_(e[n],s.i,s)),s.s.set(n,t)),t!==void 0){const i=y(t);return i===d?void 0:i}return Reflect.get(e,n,f)},getOwnPropertyDescriptor(e,n){const f=Reflect.getOwnPropertyDescriptor(e,n);if(f&&"value"in f){const t=e[r].s.get(n);t&&(f.value=y(t))}return f},has(e,n){var o;if(n===r)return!0;const f=e[r],s=Reflect.has(e,n);let t=f.s.get(n);return(t!==void 0||x!==null&&(!s||(o=b(e,n))!=null&&o.writable))&&(t===void 0&&(t=(f.i?m:g)(s?_(e[n],f.i,f):d),f.s.set(n,t)),y(t)===d)?!1:s},set(e,n,f,s){const t=e[r];let o=t.s.get(n);o===void 0&&(I(()=>s[n]),o=t.s.get(n)),o!==void 0&&l(o,_(f,t.i,t));const i=t.a,c=!(n in e);if(i&&n==="length")for(let a=f;a<e.length;a+=1){const u=t.s.get(a+"");u!==void 0&&l(u,d)}if(e[n]=f,c){if(i){const a=t.s.get("length"),u=e.length;a!==void 0&&a.v!==u&&l(a,u)}v(t.v)}return!0},ownKeys(e){const n=e[r];return y(n.v),Reflect.ownKeys(e)}};function q(e,n,f,s=null,t=!1){var o=null,i=null,c=null,a=t?B:0;F(()=>{if(c===(c=!!n()))return;let u=!1;if(Y){const P=e.data===K;c===P&&(L(z),T(!1),u=!0)}c?(o?R(o):o=w(()=>f(e)),i&&E(i,()=>{i=null})):(i?R(i):s&&(i=w(()=>s(e))),o&&E(o,()=>{o=null})),u&&T(!0)},a)}export{q as i,_ as p};
